<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gd.gym.mapper.BranchMemberMapper">
	<!-- 지점장 데이터 세션 저장용 -->
	<select id="selectMemberLoginByBranch" 
			parameterType="com.gd.gym.vo.BranchMember" 
			resultType="com.gd.gym.vo.BranchMember">
		SELECT 
			p.permission_id,
			p.member_id,
			t.memberName
		FROM 
			permission p
			JOIN (SELECT
						m.member_id memberId,
						m.member_name memberName
					FROM 
						member m
					WHERE
						m.member_mail = #{memberMail} 
						AND m.member_pw = PASSWORD(#{memberPw})) t
						ON t.memberId = p.member_id
	</select>
</mapper>